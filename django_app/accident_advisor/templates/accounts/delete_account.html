{% extends "base.html" %}
{% load static %}

{% block content %}
  <link rel="stylesheet" href="{% static 'css/profile.css' %}">

  <div class="profile-container">
    <h2 class="profile-title">회원 탈퇴</h2>

    <div class="profile-info">
      <p><strong>닉네임:</strong> {{ user.nickname }}</p>
      <p><strong>이메일:</strong> {{ user.email }}</p>
      <p><strong>총 채팅 수:</strong> {{ user.total_chats }}</p>
      <p><strong>총 게시글 수:</strong> {{ user.total_posts }}</p>

      {% if user.profile_image %}
        <div class="profile-image-wrapper">
          <img src="{{ user.profile_image.url }}" alt="프로필 이미지" class="profile-image">
        </div>
      {% else %}
        <p class="text-muted">프로필 이미지 없음</p>
      {% endif %}
    </div>

    <div class="profile-actions">
      <a href="{% url 'accounts:profile_update' %}" class="btn-profile-edit">프로필 수정</a>
      <a href="{% url 'accounts:logout' %}" class="btn-profile-logout">로그아웃</a>
    </div>

    <!-- 탈퇴 확인 폼 -->
    <div style="text-align: center; margin-top: 24px;">
      <form method="post" action="{% url 'accounts:delete_account' %}">
        {% csrf_token %}
        <input type="password" name="password" placeholder="비밀번호 입력" required
               style="padding: 6px; border-radius: 6px; border: 1px solid #ccc;">
        <button type="submit" class="btn-profile-edit" style="margin-left: 8px;">탈퇴</button>

        {% if error_message %}
          <p style="color: red; margin-top: 8px;">{{ error_message }}</p>
        {% endif %}
      </form>
    </div>
  </div>
{% endblock %}
