# 🚀 노느 채팅 메모리 시스템 - 빠른 실행 가이드

## ⚡ 즉시 실행하기

### **1. 서버 시작**
```bash
cd /Users/ozzt/SK-AI/4th-project/4th-project/SKN11-4th-1Team/django_app/accident_advisor

# Django 서버 실행
python manage.py runserver
```

### **2. 브라우저에서 접속**
```
http://127.0.0.1:8000/
```

### **3. 메모리 기능 테스트**

#### **🧪 연관 질문 테스트**
```
1단계: "교차로 좌회전 사고 과실비율은?"
       → AI가 과실비율 분석 제공
       
2단계: "관련 판례는?"
       → 메모리 인사이트 패널 나타남
       → "🔗 이전 대화와 연관된 질문으로 이해했습니다"
       
3단계: "그것의 법적 근거는?"
       → 앞서 언급한 내용 기반 응답
```

#### **🎯 개인화 테스트**
```
초보자 → 중급자 → 전문가 승급 테스트:

1. "과실비율이 뭔가요?" (초보자 응답)
2. "조문 제25조 관련 판례는?" (중급자 승급)
3. "민법 제396조 과실상계 원리" (전문가 승급)

각 단계마다 메모리 인사이트에서 레벨 변화 확인
```

#### **💡 추천 시스템 테스트**
```
1. 사고 분석만 사용 → "판례 검색도 해보세요" 추천
2. 판례 검색 추가 → "법률 조문도 확인해보세요" 추천
3. 여러 기능 사용 → "복합 상황 분석에 도전해보세요" 추천
```

## 🔍 메모리 기능 확인 포인트

### **✅ 정상 작동 확인 체크리스트**

#### **1. 연관 질문 감지**
- [ ] "관련", "그것", "그럼" 등 지시어 인식
- [ ] 메모리 인사이트 패널 자동 표시 (5초간)
- [ ] 정확도 퍼센트 표시 (60~90%)
- [ ] 이전 대화 주제 기반 질문 변환

#### **2. 개인화 시스템**
- [ ] 사용자 레벨 자동 분류 (초보자/중급자/전문가)
- [ ] 레벨별 설명 수준 조정
- [ ] 전문 용어 사용 시 자동 승급
- [ ] 상호작용 횟수 추적

#### **3. 실시간 추천**
- [ ] 사용 패턴 기반 맞춤 추천 생성
- [ ] 클릭 가능한 추천 항목
- [ ] 자동 업데이트 (대화 후)
- [ ] 추천 패널 자동 숨김 (10초)

#### **4. UI/UX 요소**
- [ ] 메모리 인사이트 패널 애니메이션
- [ ] 추천 패널 슬라이드 효과
- [ ] 반응형 디자인 (모바일/데스크톱)
- [ ] 자동 스크롤 및 포커스

## 🔧 문제 해결

### **메모리 기능이 작동하지 않을 때**

#### **1단계: 기본 확인**
```bash
# 서버 상태 확인
python manage.py check

# 로그 확인
tail -f logs/django.log
```

#### **2단계: 메모리 시스템 초기화**
```bash
python manage.py shell

# 메모리 세션 정리
>>> from main.utils.memory_system import MemoryManager
>>> manager = MemoryManager()
>>> manager.cleanup_expired_sessions()
>>> print("메모리 정리 완료")
```

#### **3단계: API 연결 확인**
```bash
# 환경 변수 확인
echo $OPENAI_API_KEY

# API 테스트
python manage.py shell
>>> from main.services.ai_classifier import get_classifier
>>> classifier = get_classifier()
>>> result = classifier.classify_query("테스트")
>>> print(result)
```

### **연관 질문이 감지되지 않을 때**

#### **확인 사항**
- 세션 ID가 유지되고 있는지 (브라우저 개발자 도구 확인)
- 이전 메시지가 메모리에 저장되었는지
- 연관 지시어가 올바르게 입력되었는지

#### **디버깅 방법**
```javascript
// 브라우저 콘솔에서 실행
console.log('현재 세션 ID:', currentSessionId);
console.log('메모리 인사이트:', localStorage.getItem('memory_insights'));
```

### **추천이 표시되지 않을 때**

#### **API 확인**
```bash
# 추천 API 직접 테스트
curl http://127.0.0.1:8000/api/recommendations/[SESSION_ID]/
```

#### **JavaScript 오류 확인**
- 브라우저 개발자 도구 → Console 탭
- JavaScript 오류 메시지 확인
- 네트워크 탭에서 API 호출 상태 확인

## 📱 데모 시나리오

### **🎬 시나리오 1: 연관 질문 체험**
```
단계 1: "교차로에서 좌회전하다가 직진차와 충돌했어요"
→ 기대 결과: 과실비율 분석 + 주제 저장

단계 2: "관련 판례 있나요?"
→ 기대 결과: 메모리 인사이트 "🔗 이전 대화와 연관된 질문으로 이해"

단계 3: "그럼 법적 근거는?"
→ 기대 결과: 교차로 좌회전 관련 법률 설명
```

### **🎬 시나리오 2: 레벨 승급 체험**
```
단계 1: "사고 났는데 누구 잘못인지 모르겠어요" (초보자)
→ 기대 결과: "🔰 초보자 tip" + 쉬운 설명

단계 2: "도로교통법 제25조 위반 시 과실비율은?" (중급자 승급)
→ 기대 결과: "👤 현재 레벨: 중급자" + 상세 설명

단계 3: "민법 제396조 과실상계 원리 적용 사례는?" (전문가 승급)
→ 기대 결과: "⚡ 전문가 모드" + 법조문 상세 분석
```

### **🎬 시나리오 3: 추천 시스템 체험**
```
단계 1: 사고 분석만 여러 번 사용
→ 기대 결과: "💡 판례 검색도 해보세요" 추천

단계 2: 추천 클릭하여 판례 검색 사용
→ 기대 결과: "💡 관련 법률 조문을 확인해보세요" 추천

단계 3: 모든 기능 사용 후
→ 기대 결과: "💡 복합적인 사고 상황으로 심화 분석을 시도해보세요" 추천
```

## 🎯 성공 기준

### **즉시 체감 가능한 변화**
- ✅ "관련", "그것" 같은 연관 질문을 AI가 정확히 이해
- ✅ 사용할수록 더 개인화된 답변 제공
- ✅ 실시간 메모리 인사이트 표시
- ✅ 맞춤 추천 기능 동작

### **사용자 경험 개선**
- ✅ 자연스러운 대화 흐름
- ✅ 학습 진행도 체감
- ✅ 개인 맞춤 서비스
- ✅ 직관적인 UI/UX

## 📞 지원

### **추가 도움이 필요할 때**

#### **문서 참조**
- `docs/implementation_summary.md` - 전체 구현 내역
- `docs/test_guide.md` - 상세 테스트 가이드
- `main/utils/memory_system.py` - 메모리 시스템 코드
- `main/services/ai_classifier.py` - AI 분류 시스템 코드

#### **로그 파일 위치**
- Django 로그: `logs/django.log`
- 메모리 시스템 로그: `logs/memory_system.log`
- 에러 로그: `logs/error.log`

#### **주요 설정 파일**
- 환경 변수: `.env`
- Django 설정: `accident_advisor/settings.py`
- URL 설정: `main/urls.py`

---

## 🎉 완료!

**축하합니다!** 노느의 채팅 메모리 시스템이 성공적으로 구현되었습니다.

이제 **스마트한 대화**, **개인화된 응답**, **학습 지원** 기능을 모두 경험할 수 있습니다.

### **다음 단계**
1. 📊 사용자 피드백 수집
2. 🔧 성능 모니터링 및 최적화
3. 🚀 추가 기능 개발
4. 🌐 배포 및 확장

**노느와 함께 더 스마트한 법률 상담을 경험해보세요!** ⚖️✨